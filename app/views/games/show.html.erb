<% content_for :stylesheets do %>
  <%= stylesheet_link_tag "game_ui", media: "all" %>
<% end %>

<% content_for :javascripts do %>
  <%= javascript_include_tag "game_ui" %>
  <%= javascript_include_tag "channels/game_logic_channel" %>
<% end %>

<div id="server-id" data-server-id="<%= @server.id %>" data-user-id="<%= current_user.id %>"></div>

<div class="header">

  <!-- Right-side content -->
  <div class="chat-room-container">
    <button id="chatRoomButton" class="chat-room-button">Open Chat Room</button>
  </div>
</div>

<div class="game-details">
  <h1>Debug Info:</h1>
  <p>Game: <%= @game.name %></p>
  <p>Status: <%= @game.status %></p>
  <p>Creator id: <%= @game.creator_id %></p>
  <p>Creator user: <%= @server.original_creator_username %></p>
</div>

<div class="game-container">
  <!-- Game Grid -->
  <div class="game-grid">
    <% @game.grid.each_with_index do |row, y| %>
      <div class="grid-row">
        <% row.each_with_index do |cell, x| %>
          <div
            class="grid-cell"
            data-x="<%= x %>"
            data-y="<%= y %>">
            <% if cell.present? %>
              <img src="<%= image_path('sprite.png') %>" alt="Player" class="sprite">
            <% else %>
              &nbsp;
            <% end %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>

<!-- Pause Menu Embedded -->
<div class="pause-button" id="pauseButton" style="display: none;">
  <div class="pause-button-header">
    <button class="pause-button-close" id="pauseButtonClose">Close</button>
  </div>
  <iframe
    src="<%= pause_menu_path %>"
    style="width: 100%; height: 95%; border: 1px solid #111111;">
  </iframe>
</div>

<!-- Chat Room Embedded -->
<div class="chat-room" id="chatRoom" style="display: none;">
  <div class="chat-room-header">
    <span><%= @server.name %></span>
    <button class="chat-room-close" id="chatRoomClose">Close</button>
  </div>
  <iframe
    src="<%= server_path(@server) %>"
    title="Chat Room for <%= @server.name %>"
    style="width: 100%; height: 95%; border: 1px solid #111111;">
  </iframe>
</div>